TunSecur Project
================

Open source security software developed by St2Py team

## About TunSecur

**TunSecur** is an open source secure tunnel software. It uses **RSA** + **AES** technologies to ensure **the army level** network communication security. 
It supports both TCP and UDP secure tunnel, used to encrypt network communication such as http proxy, socks proxy, dns server etc. 
At present, it supports both password and RSA authentication. We plan to add database authentication in the future.

It is developed by using Golang, supports **Linux**, **Windows**, **OSX**, **FreeBSD** four main operating systems.

For more details, please go to the project page [http://st2py.com/en/tunsecur/](http://st2py.com/en/tunsecur/)

## Project License

The MIT License (MIT)

Copyright (c) 2015 St2Py


## 关于 TunSecur

**TunSecur** 是一款开源安全隧道软件。它使用 **RSA** + **AES** 加密技术，确保**军事级别**的网络通信安全。
它同时支持TCP和UDP安全隧道，可用于HTTP代理、SOCKS代理、DNS服务器等网络通信的加密。
当前，它支持密码认证和RSA证书认证两种认证方式。未来，我们还计划添加数据库认证方式。

它使用Go语言开发，支持 **Linux**，**Windows**，**OSX**，**FreeBSD** 四大主流操作系统。

更多详情，请移步项目主页 [http://st2py.com/cn/tunsecur/](http://st2py.com/cn/tunsecur/)

## 项目许可

The MIT License (MIT)

Copyright (c) 2015 St2Py














  
    <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>TunSecur 项目 | St2Py官方网站</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="St2Py">
    

    
    <meta name="description" content="TunSecur是Tunnel Security的缩写，是一款开源安全隧道软件，由客户端和服务器端两部分组成，具有以下特点：

采用MIT协议发布，完全开源，完全免费
采用Go语言开发，安全、高效、易于部署
支持密码认证、RSA认证两种认证方式
支持RSA 1024、2048、4096三种长度的密钥
支持AES 128、192、256三种长度的密钥
支持CFB、CTR、OFB三种迭代模式
支持 T">
<meta property="og:type" content="website">
<meta property="og:title" content="TunSecur 项目">
<meta property="og:url" content="http://st2py.com/tunsecur/index.html">
<meta property="og:site_name" content="St2Py">
<meta property="og:description" content="TunSecur是Tunnel Security的缩写，是一款开源安全隧道软件，由客户端和服务器端两部分组成，具有以下特点：

采用MIT协议发布，完全开源，完全免费
采用Go语言开发，安全、高效、易于部署
支持密码认证、RSA认证两种认证方式
支持RSA 1024、2048、4096三种长度的密钥
支持AES 128、192、256三种长度的密钥
支持CFB、CTR、OFB三种迭代模式
支持 T">
<meta property="og:image" content="http://st2py.com/pic01.png">
<meta property="og:updated_time" content="2015-12-08T10:55:47.978Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="TunSecur 项目">
<meta name="twitter:description" content="TunSecur是Tunnel Security的缩写，是一款开源安全隧道软件，由客户端和服务器端两部分组成，具有以下特点：

采用MIT协议发布，完全开源，完全免费
采用Go语言开发，安全、高效、易于部署
支持密码认证、RSA认证两种认证方式
支持RSA 1024、2048、4096三种长度的密钥
支持AES 128、192、256三种长度的密钥
支持CFB、CTR、OFB三种迭代模式
支持 T">

    
    <link rel="alternative" href="/atom.xml" title="St2Py" type="application/atom+xml">
    
    
    <link rel="icon" href="/cn/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/cn/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/cn/img/jacman.jpg">
    
    <link rel="stylesheet" href="/cn/css/style.css" type="text/css">
</head>

      <body>
        <header>
          
<div>
		
			<div id="imglogo">
				<a href="/cn/"><img src="/cn/img/logo.png" alt="St2Py" title="St2Py"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/cn/" title="St2Py">St2Py</a></h1>
				<h2 class="blog-motto">网络安全专家</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/cn/">首页</a></li>
					
						<li><a href="/cn/bitcrypt">BitCrypt</a></li>
					
						<li><a href="/cn/tunsecur">TunSecur</a></li>
					
						<li><a href="/cn/donation">项目捐款</a></li>
					
						<li><a href="/cn/../en">English Site</a></li>
					
                    <!--
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:st2py.com">
					</form>
					
					</li>
                   -->
				</ul>
			</nav>			
</div>

        </header>
        <div id="container">
          <div id="main" class="page" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/cn/tunsecur/index.html" title="TunSecur 项目" itemprop="url">TunSecur 项目</a>
  </h1>
  <p class="article-author">
       
			&nbsp;
		
  <p class="article-time">
    <time datetime="2015-11-18T16:00:00.000Z" itemprop="datePublished"> 发表于 2015-11-19</time>
  </p>
</header>

	<div class="article-content">
		
		<p><strong>TunSecur</strong>是Tunnel Security的缩写，是一款开源安全隧道软件，由客户端和服务器端两部分组成，具有以下特点：</p>
<ul>
<li>采用<strong>MIT</strong>协议发布，完全开源，完全免费</li>
<li>采用<strong>Go语言</strong>开发，安全、高效、易于部署</li>
<li>支持<strong>密码认证</strong>、<strong>RSA认证</strong>两种认证方式</li>
<li>支持<strong>RSA</strong> 1024、2048、4096三种长度的密钥</li>
<li>支持<strong>AES</strong> 128、192、256三种长度的密钥</li>
<li>支持<strong>CFB</strong>、<strong>CTR</strong>、<strong>OFB</strong>三种迭代模式</li>
<li>支持 <strong>TCP</strong>、<strong>UDP</strong>两种传输协议</li>
<li>支持<strong>Linux</strong>、<strong>Windows</strong>、<strong>OSX</strong>、<strong>FreeBSD</strong>四大系统</li>
</ul>
<h2 id="适用场景">适用场景</h2><p><strong>TunSecur</strong>适用于需要安全网络通信的所有场景，包括但不限于下列情况：</p>
<ul>
<li>安全DNS代理</li>
<li>安全SSH代理</li>
<li>安全VPN代理</li>
<li>安全Web代理</li>
</ul>
<h2 id="安装步骤">安装步骤</h2><p><strong>TunSecur</strong>采用Go语言开发，请在安装本软件前确保已经装好了Go语言开发环境。详情可参考：<a href="https://golang.org/doc/install" target="_blank" rel="external">Install the Go tools</a></p>
<h3 id="本地安装">本地安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go get -u github.com/st2py/tunsecur</span><br></pre></td></tr></table></figure>
<h3 id="跨平台编译">跨平台编译</h3><p>Go语言具有强大的跨平台编译能力：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/st2py/tunsecur.git</span><br><span class="line"><span class="built_in">cd</span> tunsecur</span><br><span class="line"></span><br><span class="line">OS=<span class="string">"linux darwin freebsd windows"</span></span><br><span class="line">ARCH=<span class="string">"386 amd64"</span></span><br><span class="line"><span class="keyword">for</span> GOOS <span class="keyword">in</span> <span class="variable">$OS</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="keyword">for</span> GOARCH <span class="keyword">in</span> <span class="variable">$ARCH</span></span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">echo</span> Building tunsecur <span class="keyword">for</span> <span class="variable">$GOOS</span> <span class="variable">$GOARCH</span></span><br><span class="line">        go build -o <span class="variable">$GOOS</span>-<span class="variable">$GOARCH</span>-tunsecur *.go</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">GOOS=linux GOARCH=arm</span><br><span class="line"><span class="built_in">echo</span> Building tunsecur <span class="keyword">for</span> <span class="variable">$GOOS</span> <span class="variable">$GOARCH</span></span><br><span class="line">go build -o <span class="variable">$GOOS</span>-<span class="variable">$GOARCH</span>-tunsecur *.go</span><br></pre></td></tr></table></figure></p>
<h2 id="简明教程">简明教程</h2><p><strong>TunSecur</strong>的通信过程涉及到4个端点，分别是用户端、客户端、服务端、目标端：</p>
<ul>
<li><strong>用户端</strong>是真正的通信发起端点，如Web浏览器、DNS客户端等</li>
<li><strong>客户端</strong>是用户端连接到的端点，即Tunnel Client</li>
<li><strong>服务端</strong>是客户端连接到的端点，即Tunnel Server</li>
<li><strong>目标端</strong>是最终的通信接收端点，如Web网站，DNS服务器</li>
</ul>
<p>其中，用户端和客户端、以及服务端和目标端之间的网络通信，都是未加密的；只有客户端和服务端之间的通信是加密通信。这点类似于IPSec VPN协议。具体的<strong>TunSecur</strong>通信构架如下：</p>
<p><img src="pic01.png" alt=""></p>
<h3 id="查看帮助">查看帮助</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tunsecur -h</span><br></pre></td></tr></table></figure>
<h3 id="生成RSA密钥对">生成RSA密钥对</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -gen 生成密钥 -bit 指定密钥长度，可选值为 1024，2048，4096 #</span></span><br><span class="line">tunsecur -gen -bit <span class="number">2048</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -dir 指定保存密钥的目录 #</span></span><br><span class="line">tunsecur -gen -bit <span class="number">2048</span> -dir some/directory</span><br></pre></td></tr></table></figure>
<p><strong>TunSecur</strong>会生成public.pem和private.pem两个文件：前者是公钥，用于Tunnel Client端；后者是私钥，用于Tunnel Server端。</p>
<p><strong>注意：请妥善备份好这两个文件，丢失密钥对会导致无法使用RSA认证方式连接Tunnel Server！</strong></p>
<h3 id="Tunnel_运行参数">Tunnel 运行参数</h3><p><strong>-ts</strong> 设置为 Tunnel 服务端模式<br><strong>-tc</strong> 设置为 Tunnel 客户端模式</p>
<p><strong>-tcp</strong> 设置为 TCP Tunnel<br><strong>-udp</strong> 设置为 UDP Tunnel</p>
<p><strong>-lp</strong> 设置侦听端口 Host:Port<br><strong>-remote</strong> 设置转发端口 Host:Port</p>
<p><strong>-passwd</strong> 设置为密码认证模式</p>
<p><strong>-pub</strong> 设置为RSA认证模式，Tunnel客户端的RSA公钥文件<br><strong>-priv</strong> 设置为RSA认证模式，Tunnel服务端的RSA私钥文件</p>
<p><strong>-aes</strong> 设置AES加密模式，可选 ctr，cfb，ofb<br><strong>-len</strong> 设置AES密钥长度，可选 16，24，32</p>
<p><strong>-log</strong> 设置日志级别，默认只输出错误日志，设为<strong>7</strong>则输出所有级别的日志</p>
<h3 id="TCP_Tunnel">TCP Tunnel</h3><p><strong>服务端：</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tunsecur -ts -tcp -passwd <span class="built_in">test</span>123 -remote <span class="number">8.8</span>.<span class="number">8.8</span>:<span class="number">53</span> -lp <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">12345</span></span><br></pre></td></tr></table></figure></p>
<p><strong>客户端：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tunsecur -tc -tcp -passwd <span class="built_in">test</span>123 -remote <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">12345</span> -lp <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">53</span></span><br></pre></td></tr></table></figure>
<h3 id="UDP_Tunnel">UDP Tunnel</h3><p><strong>服务端：</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tunsecur -ts -udp -passwd <span class="built_in">test</span>123 -remote <span class="number">8.8</span>.<span class="number">8.8</span>:<span class="number">53</span> -lp <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">12345</span></span><br></pre></td></tr></table></figure></p>
<p><strong>客户端：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tunsecur -tc -udp -passwd <span class="built_in">test</span>123 -remote <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">12345</span> -lp <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">53</span></span><br></pre></td></tr></table></figure>
<h3 id="密码认证模式">密码认证模式</h3><p><strong>服务端：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tunsecur -ts -tcp -passwd <span class="built_in">test</span>123 -remote <span class="number">8.8</span>.<span class="number">8.8</span>:<span class="number">53</span> -lp <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">12345</span></span><br></pre></td></tr></table></figure>
<p><strong>客户端：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tunsecur -tc -tcp -passwd <span class="built_in">test</span>123 -remote <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">12345</span> -lp <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">53</span></span><br></pre></td></tr></table></figure>
<h3 id="RSA认证模式">RSA认证模式</h3><p>首先使用 tunsecur -gen 命令产生RSA公钥文件和私钥文件。其中，私钥文件用于服务端，公钥文件用于客户端。</p>
<p><strong>服务端：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tunsecur -ts -tcp -priv private.pem -remote <span class="number">8.8</span>.<span class="number">8.8</span>:<span class="number">53</span> -lp <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">12345</span></span><br></pre></td></tr></table></figure>
<p><strong>客户端：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tunsecur -tc -tcp -pub public.pem -remote <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">12345</span> -lp <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">53</span></span><br></pre></td></tr></table></figure>
<h2 id="工作原理">工作原理</h2><h3 id="密码认证模式-1">密码认证模式</h3><p>在密码认证模式下，<strong>TunSecur</strong>客户端的加密过程如下：</p>
<ol>
<li>客户端和服务端约定好 flag 为 0x23571719</li>
<li>客户端和服务端约定好 password</li>
<li>客户端产生随机的AES密钥种子 tx_seed_key, rx_seed_key 和 向量种子 tx_seed_iv, rx_seed_iv</li>
<li>客户端采用 AES-CTR-128 算法 和 password 加密 (flag, tx_seed_key, tx_seed_iv, rx_seed_key, rx_seed_iv)</li>
<li>客户端把加密的 (flag, tx_seed_key, tx_seed_iv, rx_seed_key, rx_seed_iv) 发送给服务端</li>
<li>客户端用 tx_seed_key 和 tx_seed_iv 生成AES密钥，加密用户端数据，发送给服务端</li>
<li>客户端用 rx_seed_key 和 rx_seed_iv 生成AES密钥，解密服务端数据，发送给用户端</li>
</ol>
<p>在密码认证模式下，<strong>TunSecur</strong>服务端的加密过程如下：</p>
<ol>
<li>服务端和客户端约定好 flag 为 0x23571719</li>
<li>服务端和客户端约定好 password</li>
<li>服务端接收客户端发来的加密种子 (flag, tx_seed_key, tx_seed_iv, rx_seed_key, rx_seed_iv)</li>
<li>服务端采用 AES-CTR-128 算法 和 password 解密 (flag, tx_seed_key, tx_seed_iv, rx_seed_key, rx_seed_iv)</li>
<li>服务端验证解密得到的 flag 和约定的 flag 是否相等：如果不相等认证失败，断开连接；如果相等则继续</li>
<li>服务端用 tx_seed_key 和 tx_seed_iv 生成AES密钥，解密客户端数据，发送给目标端</li>
<li>服务端用 rx_seed_key 和 rx_seed_iv 生成AES密钥，加密目标端数据，发送给客户端</li>
</ol>
<h3 id="RSA认证模式-1">RSA认证模式</h3><p>在RSA认证模式下，<strong>TunSecur</strong>客户端的加密过程如下：</p>
<ol>
<li>客户端和服务端约定好 flag 为 0x23571719</li>
<li>客户端和服务端约定好 RSA公钥和私钥</li>
<li>客户端产生随机的AES密钥种子 tx_seed_key, rx_seed_key 和 向量种子 tx_seed_iv, rx_seed_iv</li>
<li>客户端采用 RSA公钥文件加密 (flag, tx_seed_key, tx_seed_iv, rx_seed_key, rx_seed_iv)</li>
<li>客户端把加密的 (flag, tx_seed_key, tx_seed_iv, rx_seed_key, rx_seed_iv) 发送给服务端</li>
<li>客户端用 tx_seed_key 和 tx_seed_iv 生成AES密钥，加密用户端数据，发送给服务端</li>
<li>客户端用 rx_seed_key 和 rx_seed_iv 生成AES密钥，解密服务端数据，发送给用户端</li>
</ol>
<p>在RSA认证模式下，<strong>TunSecur</strong>服务端的加密过程如下：</p>
<ol>
<li>服务端和客户端约定好 flag 为 0x23571719</li>
<li>服务端和客户端约定好 RSA公钥和私钥</li>
<li>服务端接收客户端发来的加密种子 (flag, tx_seed_key, tx_seed_iv, rx_seed_key, rx_seed_iv)</li>
<li>服务端采用 RSA私钥文件 解密(flag, tx_seed_key, tx_seed_iv, rx_seed_key, rx_seed_iv)</li>
<li>服务端验证解密得到的 flag 和约定的 flag 是否相等：如果不相等认证失败，断开连接；如果相等则继续</li>
<li>服务端用 tx_seed_key 和 tx_seed_iv 生成AES密钥，解密客户端数据，发送给目标端</li>
<li>服务端用 rx_seed_key 和 rx_seed_iv 生成AES密钥，加密目标端数据，发送给客户端</li>
</ol>
<h2 id="架设安全DNS代理">架设安全DNS代理</h2><p>前提条件：必须要有一个国外的VPS服务器，国内的无法防止<strong>DNS污染</strong>和<strong>DNS劫持</strong>。具体原因不解释。<br>强烈推荐： <a href="http://www.linode.com" target="_blank" rel="external">Linode</a> 或 <a href="http://www.digitalocean.com" target="_blank" rel="external">DigitalOcean</a> </p>
<p>Ubuntu VPS服务器上架设Tunnel Server：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo tunsecur -ts -udp -passwd your_password -remote <span class="number">8.8</span>.<span class="number">8.8</span>:<span class="number">53</span> -lp <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">15353</span> &amp;</span><br><span class="line">sudo netstat -antupl | grep tunsecur | grep <span class="number">15353</span></span><br></pre></td></tr></table></figure></p>
<p>个人电脑上架设Tunnel Client：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tunsecur -tc -udp -passwd your_password -remote your_vps_ip:<span class="number">15353</span> -lp <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">53</span></span><br></pre></td></tr></table></figure></p>
<p>设置个人电脑DNS服务器为 <strong>127.0.0.1</strong>：<br>Windows、Linux、Mac OSX设置各不相同，自己搜索看怎么设置吧。</p>
<h2 id="架设安全Web代理">架设安全Web代理</h2><p>前提条件：必须要有一个国外的VPS服务器，国内的无法防止<strong>TCP重置</strong>和<strong>MITM</strong>。具体原因不解释。<br>强烈推荐： <a href="http://www.linode.com" target="_blank" rel="external">Linode</a> 或 <a href="http://www.digitalocean.com" target="_blank" rel="external">DigitalOcean</a> </p>
<p>Ubuntu VPS服务器上架设Tunnel Server：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install polipo -y</span><br><span class="line">sudo vim /etc/polipo/config</span><br></pre></td></tr></table></figure></p>
<p>其中，/etc/polipo/config 内容如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># This file only needs to list configuration variables that deviate</span></span><br><span class="line"><span class="comment"># from the default values.  See /usr/share/doc/polipo/examples/config.sample</span></span><br><span class="line"><span class="comment"># and "polipo -v" for variables you can tweak and further information.</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">log</span>Syslog = <span class="literal">true</span></span><br><span class="line"><span class="built_in">log</span>File = /var/<span class="built_in">log</span>/polipo/polipo.log</span><br><span class="line">proxyAddress = <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line">proxyPort = <span class="number">18123</span></span><br><span class="line">maxAge = <span class="number">7</span>d</span><br><span class="line">maxExpiresAge = <span class="number">9</span>d</span><br><span class="line">dnsNameServer = <span class="number">8.8</span>.<span class="number">8.8</span></span><br><span class="line">daemonise = <span class="literal">true</span></span><br><span class="line"><span class="built_in">disable</span>LocalInterface = <span class="literal">true</span></span><br><span class="line">allowedPorts = <span class="number">80</span>,<span class="number">443</span></span><br><span class="line">tunnelAllowedPorts = <span class="number">80</span>,<span class="number">443</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo polipo</span><br><span class="line">sudo netstat -antupl | grep polipo | grep <span class="number">18123</span></span><br><span class="line">sudo tunsecur -ts -tcp -passwd your_password -remote <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">18123</span> -lp <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">18080</span> &amp;</span><br><span class="line">sudo netstat -antupl | grep tunsecur | grep <span class="number">18080</span></span><br></pre></td></tr></table></figure>
<p>个人电脑上架设Tunnel Client：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tunsecur -tc -tcp -passwd your_password -remote your_vps_ip:<span class="number">18080</span> -lp <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">18080</span></span><br></pre></td></tr></table></figure></p>
<p>设置个人电脑Web代理服务器为 <strong>127.0.0.1:18080</strong>：<br>Windows、Linux、Mac OSX设置各不相同，自己搜索看怎么设置吧。</p>
<h2 id="项目捐款">项目捐款</h2><p>你的支持是我们继续开发的最大动力，任何捐款事宜请前往：<a href="http://st2py.com/cn/donation/">捐款页面</a></p>
<h2 id="项目许可">项目许可</h2><p>The MIT License (MIT)<br>Copyright (c) 2015 St2Py</p>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">


</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://st2py.com/tunsecur/index.html" data-title="TunSecur 项目 | St2Py" data-tsina="null" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
	

</div>  
        </div>
        <footer><div id="footer" >
		
		
		<p class="copyright">
		Powered by St2Py &copy; 2015 
		<a href="/cn/donation" target="_blank">Contact US</a>		
		</p>
        
        
		<div class="cc-license">
          <a href="http://creativecommons.org/licenses/by-nc-nd/4.0" class="cc-opacity" target="_blank">
            <img src="/cn/img/cc-by-nc-nd.svg" alt="Creative Commons" />
          </a>
        </div>
    
</div>
</footer>
        <script src="/cn/js/jquery-2.0.3.min.js"></script>
<script src="/cn/js/jquery.imagesloaded.min.js"></script>
<script src="/cn/js/gallery.js"></script>
<script src="/cn/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>









<link rel="stylesheet" href="/cn/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/cn/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/cn/img/scrollup.png"/></a>
	</div>
	<script src="/cn/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

      </body>
     </html>
     

